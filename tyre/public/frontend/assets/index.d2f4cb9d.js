var _=(n,r,o)=>new Promise((t,e)=>{var s=i=>{try{u(o.next(i))}catch(d){e(d)}},c=i=>{try{u(o.throw(i))}catch(d){e(d)}},u=i=>i.done?t(i.value):Promise.resolve(i.value).then(s,c);u((o=o.apply(n,r)).next())});import{c as m,r as y,a as v,b as E,d as P,_ as k,e as I,f as R,g as b,o as w,h as C,s as O,i as A,j as S,C as j,I as $,k as H}from"./vendor.d009c430.js";const N=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(e){if(e.ep)return;e.ep=!0;const s=o(e);fetch(e.href,s)}};N();const U="modulepreload",h={},q="/assets/tyre/frontend/",L=function(r,o){return!o||o.length===0?r():Promise.all(o.map(t=>{if(t=`${q}${t}`,t in h)return;h[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const c=document.createElement("link");if(c.rel=e?"stylesheet":U,e||(c.as="script",c.crossOrigin=""),c.href=t,document.head.appendChild(c),e)return new Promise((u,i)=>{c.addEventListener("load",u),c.addEventListener("error",i)})})).then(()=>r())},p=m({url:"frappe.auth.get_logged_user",cache:"User",onError(n){n&&n.exc_type==="AuthenticationError"&&f.push({name:"LoginPage"})}});function g(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const l=y({login:m({url:"login",makeParams({email:n,password:r}){return{usr:n,pwd:r}},onSuccess(n){p.reload(),l.user=g(),l.login.reset(),f.replace(n.default_route||"/")}}),logout:m({url:"logout",onSuccess(){p.reset(),l.user=g(),f.replace({name:"Login"})}}),user:g(),isLoggedIn:v(()=>!!l.user)}),x=[{path:"/",name:"Home",component:()=>L(()=>import("./Home.b91c4cfe.js"),["assets/Home.b91c4cfe.js","assets/Home.f7fd3eef.css","assets/vendor.d009c430.js","assets/vendor.1875b906.css"])},{name:"Login",path:"/account/login",component:()=>L(()=>import("./Login.7c586435.js"),["assets/Login.7c586435.js","assets/vendor.d009c430.js","assets/vendor.1875b906.css"])}];let f=E({history:P("/frontend"),routes:x});f.beforeEach((n,r,o)=>_(void 0,null,function*(){let t=l.isLoggedIn;try{yield p.promise}catch(e){t=!1}n.name==="Login"&&t?o({name:"Home"}):n.name!=="Login"&&!t?o({name:"Login"}):o()}));const B={};function V(n,r){const o=b("router-view");return w(),I("div",null,[R(o)])}var D=k(B,[["render",V]]);let a=C(D);O("resourceFetcher",H);a.use(f);a.use(A);a.component("Button",S);a.component("Card",j);a.component("Input",$);a.mount("#app");export{l as s};
